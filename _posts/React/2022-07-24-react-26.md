---
title: "[React] 페이지 구현 - 홈(/)"
excerpt: "[React] 페이지 구현 - 홈(/)"
categories: [React]
tags: [React, WEB]
toc: true
toc_sticky: true
---

## 1️⃣ 버튼 및 공통 레이아웃 만들기

### MyHeader.js

```js
// src > components > MyHeader.js
const MyHeader = ({ headText, leftChild, rightChild }) => {
  return (
    <header>
      <div className="head_btn_left">{leftChild}</div>
      <div className="head_text">{headText}</div>
      <div className="head_btn_right">{rightChild}</div>
    </header>
  );
};

export default MyHeader;
```

```css
/* src > App.css */
/* Header */
header {
  padding-top: 20px;
  padding-bottom: 20px;
  display: flex;
  align-items: center;
  border-bottom: 1px solid #e2e2e2;
}
header > div {
  display: flex;
}
header .head_text {
  width: 50%;
  font-size: 25px;
  justify-content: center;
}
header .head_btn_left {
  width: 25%;
  justify-content: start;
}
header .head_btn_right {
  width: 25%;
  justify-content: end;
}
header button {
  font-family: "Nanum Pen Script";
}
```

### MyButton.js

```js
// src > components > MyButton.js
const MyButton = ({ text, type, onClick }) => {
  const btnType = ["positive", "negative"].includes(type) ? type : "default";

  return (
    <button
      className={["MyButton", `MyButton_${type}`].join(" ")}
      onClick={onClick}
    >
      {text}
    </button>
  );
};
MyButton.defaultProps = {
  type: "default",
};
export default MyButton;
```

type에 따라서 css 디자인을 통해 다른 색깔이 나오도록 함.

```css
/* src > App.css */
/* MyButton */
.MyButton {
  cursor: pointer;
  border: none;
  border-radius: 5px;

  padding-top: 10px;
  padding-bottom: 10px;
  padding-left: 20px;
  padding-right: 20px;

  font-size: 18px;
  white-space: nowrap;
  font-family: "Nanum Pen Script";
}
.MyButton_default {
  background: #ececec;
  color: black;
}
.MyButton_positive {
  background: #64c064;
  color: white;
}
.MyButton_negative {
  background: #fd565f;
  color: white;
}
```

## 2️⃣ 헤더 만들기

```js
// src > pages > Home.js
import { useState } from "react";
// COMPONENTS
import MyHeader from "./../components/MyHeader";
import MyButton from "./../components/MyButton";

const Home = () => {
  const [curDate, setCurDate] = useState(new Date());

  const headText = `${curDate.getFullYear()}년 ${curDate.getMonth() + 1}월`;
  // 버튼 클릭 -> 월이 바뀔 수 있도록 하는 메서드
  const increaseMonth = () => {
    setCurDate(
      new Date(curDate.getFullYear(), curDate.getMonth() + 1),
      curDate.getDate()
    );
  };
  const decreaseMonth = () => {
    setCurDate(
      new Date(curDate.getFullYear(), curDate.getMonth() - 1),
      curDate.getDate()
    );
  };
  return (
    <div>
      <MyHeader
        headText={headText}
        leftChild={<MyButton text={"<"} onClick={decreaseMonth} />}
        rightChild={<MyButton text={">"} onClick={increaseMonth} />}
      ></MyHeader>
    </div>
  );
};

export default Home;
```

## 3️⃣ 임시로 App 컴포에 dummyList 넣기

```js
// src > App.js
const dummyData = [
  {
    id: 1,
    emotion: 1,
    content: "오늘의 일기 1번",
    date: 1658666575617,
  },
  {
    id: 2,
    emotion: 2,
    content: "오늘의 일기 2번",
    date: 1658666575619,
  },
  {
    id: 3,
    emotion: 3,
    content: "오늘의 일기 3번",
    date: 1658666575621,
  },
  {
    id: 4,
    emotion: 4,
    content: "오늘의 일기 4번",
    date: 1658666575623,
  },
  {
    id: 5,
    emotion: 5,
    content: "오늘의 일기 5번",
    date: 1658666575625,
  },
];

// data 기본값을 dummyData로 변경
const [data, dispatch] = useReducer(reducer, dummyData);
```

## 4️⃣ Home 컴포에서 dummyData 사용

일기가 작성된 날짜에 따라서 해당 월에 작성된 일기만 출력해야 되므로 Date 객체를 사용해서 일기가 작성될 날짜를 구한다.

```js
const Home = () => {
  const diaryList = useContext(DiaryStateContext);

  // 현재 월에 해당하는 일기만 필요하므로 useState 사용
  const [data, setData] = useState([]);
  const [curDate, setCurDate] = useState(new Date());

  // 해당 달에 작성된 일기만 추리기 위한 코드
  useEffect(() => {
    if (diaryList.length >= 1) {
      const firstDay = new Date(
        curDate.getFullYear(),
        curDate.getMonth(),
        1
      ).getTime();
      const lastDay = new Date(
        curDate.getFullYear(),
        curDate.getMonth() + 1,
        0
      ).getTime();

      setData(
        diaryList.filter((it) => firstDay <= it.date && it.date <= lastDay)
      );
    }
  }, [diaryList, curDate]);

  ...
export default Home;
```

### 일기 컴포넌트 만들기

components 폴더에 DiaryList.js 라는 컴포넌트를 만든다. <br>
DiaryList 컴포넌트는 더미 리스트의 데이터를 하나의 리스트처럼 묶어서 사용할 수 있도록 만든 컴포넌트 이다.

```js
// src > components > DiaryList.js
const DiaryList = ({ diaryList }) => {
  return (
    <div>
      {diaryList.map((it) => (
        <div key={it.id}>{it.content}</div>
      ))}
    </div>
  );
};

DiaryList.defaultProps = {
  dirayList: [],
};

export default DiaryList;
```

컴포넌트를 만들었으니까 Home 컴포넌트에 연결을 해주고, 추가해준다.

```js
return (
  <div>
    <MyHeader
      headText={headText}
      leftChild={<MyButton text={"<"} onClick={decreaseMonth} />}
      rightChild={<MyButton text={">"} onClick={increaseMonth} />}
    ></MyHeader>
    <DiaryList diaryList={data}></DiaryList>
  </div>
);
```

### DiaryList 정렬

헤더 밑에 있는 버튼 같은거! 최근순, 오래된 순, 좋은 감정, 안좋은 감정을 필터링 할 수 있는 기능을 만들 것이다.

- 최신순, 오래된 순 option 만들기

  ```js
  // src > components > DiaryList.js
  import { useState } from "react";

  const ControlMenu = ({ value, onChange, optionList }) => {
    return (
      <select value={value} onChange={(e) => onChange(e.target.value)}>
        {optionList.map((it, idx) => (
          <option key={idx} value={it.value}>
            {it.name}
          </option>
        ))}
      </select>
    );
  };

  const sortOptionList = [
    { value: "latest", name: "최신순" },
    { value: "oldest", name: "오래된 순" },
  ];
  const DiaryList = ({ diaryList }) => {
    const [sortType, setSortType] = useState("latest");
    return (
      <div>
        <ControlMenu
          value={sortType}
          onChange={setSortType}
          optionList={sortOptionList}
        ></ControlMenu>
        {diaryList.map((it) => (
          <div key={it.id}>{it.content}</div>
        ))}
      </div>
    );
  };

  DiaryList.defaultProps = {
    dirayList: [],
  };

  export default DiaryList;
  ```

  - value Prop: 어떤 종류의 select를 골랐는지
  - onChange Prop: select가 정의한 값이 바뀌었을 때 기능하는 함수
  - option Prop: select 태그 안에 들어있는 리스트
    <br>

  ❓ key={idx}가 필요한 이유?
