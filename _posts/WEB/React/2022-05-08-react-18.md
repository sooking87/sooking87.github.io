---
title: "[React] ìµœì í™” 2. ì»´í¬ë„ŒíŠ¸ ì¬ ì‚¬ìš©"
excerpt: "[React] ìµœì í™” 2. ì»´í¬ë„ŒíŠ¸ ì¬ ì‚¬ìš©"
categories: [React]
tags: [React, WEB]
toc: true
toc_sticky: true
---

ğŸ“Œ ë¦¬ì•¡íŠ¸ ê³µì‹ ë¬¸ì„œ <https://ko.reactjs.org/docs/getting-started.html> -> API ì°¸ê³ ì„œ -> react -> React.memo

## ğŸ”® React.memoì˜ ì—­í• 

```jsx
const MyComponent = React.memo(function MyComponent(props) {
  /* propsë¥¼ ì‚¬ìš©í•˜ì—¬ ë Œë”ë§ */
});
```

ê³µì‹ ë¬¸ì„œì— ë‚˜ì™€ ìˆëŠ” ì˜ˆì‹œì¸ë°, ì„¤ëª…ì„ ì½ì–´ë³´ë©´ ì»´í¬ë„ŒíŠ¸(MyComponent)ë¥¼ React.memo í•¨ìˆ˜ì˜ ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬í•˜ë©´ ì„±ëŠ¥ì´ í–¥ìƒëœ ì»´í¬ë„ŒíŠ¸(ê³ ì°¨ ì»´í¬ë„ŒíŠ¸)ë¡œ ë°˜í™˜ í•´ì¤€ë‹¤. <br>

-> ê³ ì°¨ ì»´í¬ë„ŒíŠ¸ê°€ ëœ MyComponentëŠ” propsê°€ ë³€í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ë¦¬ëœë”ë˜ì§€ ì•ŠëŠ”ë‹¤. (ë¬¼ë¡  propsê°€ ë³€í•˜ë©´ ë¦¬ëœë”ê°€ ë˜ê² ì§€ë§Œ,,,)

## ğŸ“ OptimizeTest.js

ì´ ì»´í¬ë„ŒíŠ¸ëŠ” ê·¸ëƒ¥ React.memo()ì˜ ê¸°ëŠ¥ì„ í™•ì¸í•˜ê¸° ìœ„í•´ì„œ ë§Œë“  ì»´í¬ë„ŒíŠ¸ì´ë‹¤.

```jsx
import { useState, useEffect } from "react";

const Countview = ({ count }) => {
  useEffect(() => {
    console.log(`Update :: count : ${count}`);
  });
  return <div>{count}</div>;
};

const Textview = ({ text }) => {
  useEffect(() => {
    console.log(`Update :: Text : ${text}`);
  });
  return <div>{text}</div>;
};

const OptimizeTest = () => {
  const [count, setCount] = useState(1);
  const [text, setText] = useState("");
  return (
    <div style={{ padding: 50 }}>
      <div>
        <h2>count</h2>
        <Countview count={count} />
        <button onClick={() => setCount(count + 1)}>+</button>
      </div>
      <div>
        <h2>text</h2>
        <Textview text={text} />
        <input value={text} onChange={(e) => setText(e.target.value)} />
      </div>
    </div>
  );
};

export default OptimizeTest;
```

- **_OptimizeTest_** ì»´í¬ë„ŒíŠ¸ ë°‘ì—
  - **_Countview_** ì»´í¬ë„ŒíŠ¸ì™€
  - **_Textview_** ì»´í¬ë„ŒíŠ¸ê°€ ì¡´ì¬
    <br>

Countviewì™€ Textview ì»´í¬ë„ŒíŠ¸ê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ ì—…ë°ì´íŠ¸ë¥¼ í•´ì£¼ê¸° ìœ„í•´ì„œ useEffect() ì‚¬ìš© <br>

â“ ë¬¸ì œì  â“ <br>
ê·¼ë° ì´ë ‡ê²Œ ë˜ë©´ ì»´í¬ë„ŒíŠ¸ê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ ì—…ë°ì´íŠ¸ë¥¼ í•´ì£¼ê¸´ í•˜ëŠ”ë°, ë³€ê²½ë˜ì§€ ì•Šì€ ë‚˜ë¨¸ì§€ ì»´í¬ë„ŒíŠ¸ë„ **_ë°˜ë“œì‹œ_** ì—…ë°ì´íŠ¸ë¥¼ í•˜ê²Œ ëœë‹¤. <br>

ğŸ’¡ í•´ê²°ì±… ğŸ’¡ <br>
React.memo() !

## ğŸ“ React.memo() ì‚¬ìš© 1

```jsx
const Countview = React.memo(({ count }) => {
  useEffect(() => {
    console.log(`Update :: count : ${count}`);
  });
  return <div>{count}</div>;
});

const Textview = React.memo(({ text }) => {
  useEffect(() => {
    console.log(`Update :: Text : ${text}`);
  });
  return <div>{text}</div>;
});
```

-> ì´ë ‡ê²Œ ë˜ë©´ ë³€ê²½ë˜ì§€ ì•Šì€ ì»´í¬ë„ŒíŠ¸ëŠ” ì—…ë°ì´íŠ¸ê°€ ë˜ì§€ ì•ŠëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

## ğŸ“ React.memo() ì‚¬ìš© 2

ë‘ ë²ˆì§¸ ì˜ˆì‹œì—ì„œëŠ” í•˜ë‚˜ëŠ” propìœ¼ë¡œ ê·¸ëƒ¥ ìˆ«ìë¥¼, ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ì˜ propì„ ê°ì²´ë¡œ ë„£ì–´ë³´ê³  ë¹„êµí•´ë³¸ë‹¤.

```jsx
const CounterA = React.memo(({ count }) => {
  useEffect(() => {
    console.log(`CounterA update :: count : ${count}`);
  });
  return <div>{count}</div>;
});

const CounterB = React.memo(({ obj }) => {
  useEffect(() => {
    console.log(`CounterB update :: obj.count : ${obj.count}`);
  });
  return <div>{obj.count}</div>;
});
```

ì§€ê¸ˆ ë‘ ì»´í¬ë„ŒíŠ¸ ëª¨ë‘ setCount()ì™€ setObj()ì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ì²˜ìŒì˜ í• ë‹¹ê°’ì¸ 1ë¡œ í•˜ê³ , ë”ì´ìƒ ë³€í™”ë˜ì§€ ì•Šë„ë¡ count, obj.countë§Œ ì „ë‹¬í•œ ìƒíƒœ = ì¦‰, ê°’ì´ ë³€ê²½ë˜ì§€ ì•ŠëŠ” ìƒíƒœë¼ëŠ” ëœ» <br>

ë‘ ì»´í¬ë„ŒíŠ¸ ëª¨ë‘ _React.memo()_ ë¥¼ ì‚¬ìš©í•˜ì˜€ê³ , ê°’ì´ ë³€ê²½ë˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ë‘ ì»´í¬ë„ŒíŠ¸ ëª¨ë‘ ë¦¬ëœë”ê°€ ë˜ì§€ ì•Šì„ ê²ƒ ê°™ë‹¤. <br>

í•˜ì§€ë§Œ ì •ìˆ˜í˜•ì„ ì „ë‹¬í–ˆë˜ CounterAì˜ ê²½ìš°ëŠ” ë¦¬ëœë”ê°€ ë˜ì§€ ì•Šì•˜ì§€ë§Œ, ê°ì²´ë¥¼ ì „ë‹¬í–ˆë˜ CounterBì˜ ê²½ìš°ëŠ” ë¦¬ëœë”ê°€ ë˜ê³  ìˆë‹¤. -> ì™œ WHY ğŸ–ï¸? <br>

â— ê°ì²´ëŠ” ì–•ì€ ë¹„êµë¥¼ í•˜ê¸° ë•Œë¬¸ â— <br>

jsëŠ” ê°ì²´, í•¨ìˆ˜, ë°°ì—´ì€ ì£¼ì†Œë¥¼ í†µí•´ì„œ ë¹„êµí•˜ê¸° ë•Œë¬¸ì— ê°’ì´ ê°™ë”ë¼ë„ ë‹¤ë¥¸ ì£¼ì†Œì´ë¯€ë¡œ ë‹¤ë¥´ë‹¤ê³  íŒë‹¨í•´ì„œ onClickì„ í•  ë•Œë§ˆë‹¤ ë§¤ë²ˆ ë¦¬ëœë”ê°€ ë˜ì—ˆë˜ ê²ƒì´ë‹¤. <br>

ğŸ’¡ í•´ê²°ì±… ğŸ’¡ <br>
areEquel()ì„ ì‚¬ìš©

### ğŸ“ areEquel()ì„ ì‚¬ìš©í•´ì„œ ê¹Šì€ ë¹„êµí•´ë³´ê¸°

areEquel() ê°™ì€ ê²½ìš°ëŠ” <br>
trueë¥¼ ë°˜í™˜í•˜ë©´ ê°’ì´ ê°™ìœ¼ë¯€ë¡œ ë¦¬ëœë”í•˜ì§€ ë§ë¼ëŠ” ëœ»ì´ê³  <br>
falseë¥¼ ë°˜í™˜í•˜ë©´ ê°’ì´ ë‹¤ë¥´ë‹¤ëŠ” ì˜ë¯¸ì´ë¯€ë¡œ ë¦¬ëœë”í•˜ë¼ëŠ” ëœ»ì´ë‹¤.

```jsx
const areEquel = (prevProps, nextProps) => {
  if (prevProps.obj.count === nextProps.obj.count) {
    return true; // ì´ì „ í”„ë¡­ìŠ¤ì™€ í˜„ì¬ í”„ë¡­ìŠ¤ê°€ ê°™ë‹¤ -> ë¦¬ëœë”ë§ì„ ì¼ìœ¼í‚¤ì§€ ì•ŠëŠ”ë‹¤.
  }
  return false; // ì´ì „ í”„ë¡¬ìŠ¤ì™€ í˜„ì¬ í”„ë¡­ìŠ¤ê°€ ê°™ì§€ ì•Šë‹¤. -> ë¦¬ëœë”ë§ì„ í•´ë¼
};
```

ìœ„ ì½”ë“œì˜ areEquel() ì„ ë³´ê²Œ ë˜ë©´ ì´ì „ ê°ì²´ì˜ count ê°’ê³¼ ë‹¤ìŒ ê°ì²´ì˜ count ê°’ì´ ê°™ìœ¼ë©´(true) ë¦¬ëœë”í•˜ì§€ ë§ê³ , ê°’ì´ ë‹¤ë¥´ë©´(false) ë¦¬ëœë” í•˜ë¼ëŠ” ì˜ë¯¸ì´ë‹¤. -> ì´ í•¨ìˆ˜ì˜ ë¦¬í„´ì€ true/false

```jsx
const MemoizedCounterB = React.memo(CounterB, areEquel);
```

ì´ë ‡ê²Œ ë˜ë©´ ì»´í¬ë„ŒíŠ¸ëŠ” CounterBê°€ ì•„ë‹ˆë¼ MemoizedCounterBê°€ ë˜ë¯€ë¡œ íƒœê·¸ë„ MemoizedCounterBë¡œ ë³€ê²½ í•„ìš”
